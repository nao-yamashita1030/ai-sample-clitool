# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
未定

### 1.2 プロジェクトの目的
URLを入力したらそのサイトのリンク切れを調査するデスクトップアプリケーションを開発する

### 1.3 プロジェクトの背景
業務効率化・自動化のため、Webサイトのリンク切れを効率的に調査するツールが必要になった

### 1.4 プロジェクトの範囲
- デスクトップアプリケーションとして実装（Windows対応）
- URLを入力してリンク切れを調査する機能を提供
- 入力したURLから再帰的に全ページを調査（サイト全体）
- レポート形式でエクスポート（CSV形式）

## 2. 対象ユーザー

### 2.1 主要ユーザー
開発者・エンジニア

### 2.2 ユーザー属性
- 技術レベル: 中〜高（開発者・エンジニア向け）
- 利用環境: Windowsデスクトップ環境

### 2.3 ユーザーストーリー
- 開発者・エンジニアがWebサイトのリンク切れを効率的に調査したい
- サイト全体のリンク切れを一括で確認したい
- 調査結果をレポートとして保存・共有したい

## 3. 機能要件

### 3.1 必須機能

#### 3.1.1 URL入力機能
- URLを入力して調査を開始する機能

#### 3.1.2 リンク切れ調査機能
- 入力したURLから再帰的に全ページを調査（サイト全体）
- HTTPステータスコード（404、500など）によるリンク切れの判定

#### 3.1.3 調査結果表示機能
- リンク切れのURL
- リンク切れの原因（404、タイムアウトなど）
- リンク切れが見つかったページのURL（リンク元）
- リンクのアンカーテキスト（リンクの表示テキスト）
- HTTPステータスコード
- エラーメッセージ
- 調査日時

#### 3.1.4 レポートエクスポート機能
- CSV形式でのエクスポート

#### 3.1.5 調査設定機能
- 調査する最大ページ数の制限
- 調査する最大階層レベルの制限
- 調査対象ドメインの制限（同一ドメインのみ、外部リンクも含むなど）
- 調査対象のファイルタイプの指定（HTMLのみ、画像も含むなど）
- リトライ回数の設定（失敗時の再試行回数）
- タイムアウト時間の設定
- 並列リクエスト数の設定（同時に調査するページ数）

#### 3.1.6 調査履歴機能
- 調査履歴の保存・読み込み

#### 3.1.7 調査結果フィルタリング機能
- 調査結果のフィルタリング（ステータスコード、ドメインなどで絞り込み）

#### 3.1.8 調査結果検索機能
- 調査結果の検索機能

#### 3.1.9 調査制御機能
- 調査の一時停止・再開機能

#### 3.1.10 進捗表示機能
- 調査の進捗状況の表示（プログレスバー、パーセンテージなど）

#### 3.1.11 統計情報表示機能
- 調査結果の統計情報表示（リンク切れの数、正常なリンクの数など）

### 3.2 推奨機能
（将来検討）

### 3.3 将来検討機能
（将来検討）

### 3.4 機能詳細
（詳細設計フェーズで詳細化）

## 4. 非機能要件

### 4.1 パフォーマンス要件
- 1ページあたりの調査時間: 5秒以内
- レスポンスタイム: ユーザー操作に対する応答は即座に（1秒以内）
- スループット: 同時に複数ページを調査可能（並列リクエスト対応）
- 同時接続数: 設定可能（デフォルト値は要検討）

### 4.2 可用性要件
- 稼働率目標: ローカル実行のため、OSが稼働している限り利用可能
- ダウンタイム許容範囲: ローカル実行のため、ダウンタイムは発生しない
- メンテナンス計画: 必要に応じて更新可能

### 4.3 拡張性要件
- 将来の拡張性: 機能追加が容易な設計
- スケーラビリティ要件: 大規模サイトの調査にも対応可能な設計

### 4.4 互換性要件
- 対応OS: Windows
- 対応ブラウザ: 不要（デスクトップアプリケーション）
- その他互換性要件: Windows 10以降を想定

## 5. 技術要件

### 5.1 使用技術スタック
- フロントエンド: Electron（JavaScript/TypeScript + HTML/CSS）
- バックエンド: Node.js（Electron内）
- データベース: SQLite（軽量、ファイルベース）
- インフラ: デスクトップアプリケーション（ローカル実行）
- その他: HTTPリクエストライブラリ（axios、node-fetchなど）

### 5.2 技術的制約
- Windows OS対応
- Electronを使用したデスクトップアプリケーション

### 5.3 既存システムとの連携
- 既存システムとの連携は不要（スタンドアロンアプリケーション）

## 6. UI/UX要件

### 6.1 デザイン方針
- シンプル・ミニマル（機能重視）
- 開発者・エンジニア向けの実用的なUI
- 不要な装飾を排除し、機能性を最優先

### 6.2 ユーザビリティ要件
- 直感的な操作が可能
- 調査結果が一目で分かる表示
- エラーメッセージが分かりやすい

### 6.3 アクセシビリティ要件
- 基本的なアクセシビリティ対応（キーボード操作など）

### 6.4 レスポンシブデザイン
- デスクトップアプリケーションのため、固定サイズのウィンドウ
- ウィンドウサイズのリサイズは可能

## 7. データ要件

### 7.1 データ構造
- 調査結果データ（リンク切れ情報）
  - リンク切れのURL
  - リンク切れの原因
  - リンク元のURL
  - アンカーテキスト
  - HTTPステータスコード
  - エラーメッセージ
  - 調査日時
- 調査履歴データ
  - 調査したURL
  - 調査日時
  - 調査設定（オプション）
- 設定データ
  - 調査オプション（最大ページ数、タイムアウトなど）

### 7.2 データ量
- 想定データ量: 調査結果は数千〜数万件を想定
- データ増加率: 調査を実行するたびに増加

### 7.3 データ保持期間
- 調査結果: ユーザーが削除するまで保持
- 調査履歴: ユーザーが削除するまで保持
- 設定: 永続的に保持

### 7.4 データバックアップ
- ローカルファイル（SQLite）として保存されるため、ユーザーが手動でバックアップ可能
- 自動バックアップ機能は初期リリースでは不要

## 8. セキュリティ要件

### 8.1 認証・認可
- 認証・認可機能は不要（ローカル実行のみ）

### 8.2 データ保護
- ローカルに保存されるデータの暗号化は不要（初期リリース）
- 個人情報を扱わないため、特別な保護は不要

### 8.3 通信セキュリティ
- HTTP/HTTPSリクエストを送信するため、HTTPS対応サイトは適切に処理
- 通信の暗号化は標準的なHTTPSを使用

### 8.4 脆弱性対策
- 一般的なセキュリティベストプラクティスに従う
- 依存パッケージの脆弱性を定期的に確認・更新

## 9. 制約事項

### 9.1 スケジュール制約
- 期限なし（柔軟に開発を進める）

### 9.2 予算制約
- 予算制約なし（オープンソース技術を使用）

### 9.3 リソース制約
- リソース制約なし（個人プロジェクトまたは小規模チームを想定）

### 9.4 その他の制約
- Windows OS対応のみ（初期リリース）

## 10. 用語集

### 10.1 リンク切れ
Webページ内のリンクが、参照先のページが存在しない、またはアクセスできない状態のこと。HTTPステータスコード404（Not Found）などが返される。

### 10.2 HTTPステータスコード
HTTPリクエストに対するサーバーの応答を表す数値コード。主なもの：
- 200: OK（正常）
- 301/302: リダイレクト
- 404: Not Found（ページが見つからない）
- 500: Internal Server Error（サーバーエラー）

### 10.3 再帰的調査
入力したURLから開始し、そのページ内のリンクを辿って、さらにそのリンク先のページも調査する方式。サイト全体を網羅的に調査する。

### 10.4 アンカーテキスト
HTMLの`<a>`タグで表示されるリンクのテキスト部分。ユーザーがクリックする部分の文字列。

### 10.5 並列リクエスト
複数のHTTPリクエストを同時に送信すること。調査の効率化のために使用。

## 11. 参考資料
（必要に応じて追加）

